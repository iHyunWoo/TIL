# TCP와 UDP


## TCP
##### TCP의 특징
- 연결 지향성
	- 데이터 전송 전, 송신자와 수신자 간에 3-Way Handshake 과정을 통해 연결
- 신뢰성
	- 전송된 데이터의 순서와 무결성을 보장. 손실된 데이터는 재전송
- 데이터 순서 보장
	- 수신  측에서 데이터가 원래의 순서대로 재조립
##### TCP의 동작 원리
- 3-Way Handshake: 연결 설정
	- 1. SYN: 클라이언트가 서버에 연결 요청
	- 2. SYN-ACK: 서버가 요청을 수락하고, 확인 메시지를 보냄
	- 3. ACK: 서버의 응답을 확인 후 연결 성립
- 데이터 전송
	- 슬라이딩 윈도우 프로토콜을 사용하여 전송
	- 손실된 패킷은 재전송 요청
- 4-Way Handshaking: 연결 종료. 서로 FIN과 ACK를 주고 받음
- 일반적인 웹서비스에서 사용

##### TCP의 흐름제어와 혼잡제어
- 흐름제어
	- 개념
		- 송신자와 수신자의 데이터 처리 속도 차이를 해결하기 위한 기법
	- 1. Stop-and-wait
		- 데이터를 1개 보내고 ACK가 오면 다음 데이터를 보내는 방식
		- 하나를 주고받기 때문에 속도가 느리고 비효율적
	- 2. 슬라이딩 윈도우
		- TCP에서 주로 사용
		-  윈도우 크기: 송신자가 한 번에 전송할 수 있는 패킷의 최대 수
			- 수신자가 처리할 수 있는 데이터 양에 따라 동적으로 결정
		- 윈도우 이동
			- 전송된 패킷에 대해 수신자로부터 ACK를 받으면, 윈도우가 앞으로 이동하여 새로운 데이터 전송
- 혼잡제어
	- 개념
		- 송신자의 데이터 전달과 네트워크의 데이터 처리 속도 차이를 해결하기 위한 기법
		- 특정 라우터에 데이터가 몰릴 경우 자신에게 온 데이터를 모두 처리할 수 없음
		- 그러면 송신자는 다시 라우터로 재전송 -> 혼잡 가중
		- 이러한 위험을 줄이기 위해 송신자가 보내는 데이터의 전송 속도를 강제로 줄이는게 혼잡제어
	- 1. 합 증가/곱 감소(AIMD: Additive Increase / Multiplicative Decrease)
		- 처음 패킷을 하나씩 보내고, 문제없이 도착한다면 window를 1씩 증가 시켜서 전송
			- for문이 모두 끝나면 +1 하는 느낌
		- 패킷 전송을 실패하면 절반으로 줄임
	- 2. Slow start
		- 패킷이 문제 없이 도착하면 ACK 패킷마다 window를 1씩 증가(지수적 증가)
			- for 문 안에서 완료될때마다 +1하는 느낌
		- 혼잡 현상이 발생하면 window크기를 1로 줄여버림
		- 임계점을 설정해서 해당 부분까지만 지수적 증가시키고 그 이후는 선형적으로 1씩 증가
	- 3. 빠른 재전송
		- 정상적인 재전송 큐 과정을 따르지 않고, 중간 누락된 세그먼트를 빠르게 재전송
	- 4. 빠른 회복
		- 혼잡이 감지되면 반로 줄이고 선형증가(AIMD)

## UDP
##### UDP의 특징
- 비연결성: 데이터그램 방식
- 낮은 신뢰성
	- 최소한의 오류만 검출하고, 응답 신호 절차를 거치지 않음
- 빠른 속도
	- 비 연결, 단순한 헤더 등으로 빠른 속도
- 실시간 스트리밍, 게임, VoIP 등에서 사용

## Reference
- [TCP와 UDP의 특징과 차이](https://mangkyu.tistory.com/15)
- [TCP 신뢰성의 특징: 흐름제어 / 혼잡제어](https://ooeunz.tistory.com/91)
- [TCP 3 Way-Handshake & 4 Way-Handshake](https://mindnet.tistory.com/entry/네트워크-쉽게-이해하기-22편-TCP-3-WayHandshake-4-WayHandshake)
